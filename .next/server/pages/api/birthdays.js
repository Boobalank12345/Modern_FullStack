"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/birthdays";
exports.ids = ["pages/api/birthdays"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbirthdays&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cbirthdays%5Cindex.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbirthdays&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cbirthdays%5Cindex.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_birthdays_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\birthdays\\index.js */ \"(api)/./pages/api/birthdays/index.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_birthdays_index_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_birthdays_index_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/birthdays\",\n        pathname: \"/api/birthdays\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_birthdays_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmJpcnRoZGF5cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYmlydGhkYXlzJTVDaW5kZXguanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDOEQ7QUFDOUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDBEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywwREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iaXJ0aGRheS1yZW1pbmRlci10cmFja2VyLz8wOWM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcYmlydGhkYXlzXFxcXGluZGV4LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYmlydGhkYXlzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYmlydGhkYXlzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbirthdays&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cbirthdays%5Cindex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = \"mongodb://localhost:27017/birthday-reminder-tracker\";\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */ let cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0I7QUFFL0IsTUFBTUMsY0FBY0MscURBQXVCO0FBRTNDLElBQUksQ0FBQ0QsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQTs7OztDQUlDLEdBQ0QsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7UUFDbEI7UUFFQU4sT0FBT0csT0FBTyxHQUFHUix1REFBZ0IsQ0FBQ0MsYUFBYVMsTUFBTUcsSUFBSSxDQUFDLENBQUNiO1lBQ3pELE9BQU9BO1FBQ1Q7SUFDRjtJQUVBLElBQUk7UUFDRkssT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87SUFDcEMsRUFBRSxPQUFPTSxHQUFHO1FBQ1ZULE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNTTtJQUNSO0lBRUEsT0FBT1QsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmlydGhkYXktcmVtaW5kZXItdHJhY2tlci8uL2xpYi9tb25nb2RiLmpzP2Q5MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSVxyXG5cclxuaWYgKCFNT05HT0RCX1VSSSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGRlZmluZSB0aGUgTU9OR09EQl9VUkkgZW52aXJvbm1lbnQgdmFyaWFibGUgaW5zaWRlIC5lbnYubG9jYWwnKVxyXG59XHJcblxyXG4vKipcclxuICogR2xvYmFsIGlzIHVzZWQgaGVyZSB0byBtYWludGFpbiBhIGNhY2hlZCBjb25uZWN0aW9uIGFjcm9zcyBob3QgcmVsb2Fkc1xyXG4gKiBpbiBkZXZlbG9wbWVudC4gVGhpcyBwcmV2ZW50cyBjb25uZWN0aW9ucyBncm93aW5nIGV4cG9uZW50aWFsbHlcclxuICogZHVyaW5nIEFQSSBSb3V0ZSB1c2FnZS5cclxuICovXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2VcclxuXHJcbmlmICghY2FjaGVkKSB7XHJcbiAgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZGJDb25uZWN0KCkge1xyXG4gIGlmIChjYWNoZWQuY29ubikge1xyXG4gICAgcmV0dXJuIGNhY2hlZC5jb25uXHJcbiAgfVxyXG5cclxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICBjb25zdCBvcHRzID0ge1xyXG4gICAgICBidWZmZXJDb21tYW5kczogZmFsc2UsXHJcbiAgICB9XHJcblxyXG4gICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xyXG4gICAgICByZXR1cm4gbW9uZ29vc2VcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZVxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbFxyXG4gICAgdGhyb3cgZVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhY2hlZC5jb25uXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdCJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJjb25uZWN0IiwidGhlbiIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api)/./models/Birthday.js":
/*!****************************!*\
  !*** ./models/Birthday.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst BirthdaySchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: [\n            true,\n            \"Please provide a name\"\n        ],\n        maxlength: [\n            60,\n            \"Name cannot be more than 60 characters\"\n        ]\n    },\n    dateOfBirth: {\n        type: Date,\n        required: [\n            true,\n            \"Please provide a date of birth\"\n        ]\n    },\n    relationship: {\n        type: String,\n        enum: [\n            \"family\",\n            \"friend\",\n            \"colleague\",\n            \"acquaintance\",\n            \"other\"\n        ],\n        default: \"friend\"\n    },\n    email: {\n        type: String,\n        lowercase: true,\n        match: [\n            /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/,\n            \"Please provide a valid email\"\n        ]\n    },\n    phone: {\n        type: String\n    },\n    notes: {\n        type: String,\n        maxlength: [\n            500,\n            \"Notes cannot be more than 500 characters\"\n        ]\n    },\n    giftIdeas: [\n        {\n            type: String,\n            maxlength: [\n                100,\n                \"Gift idea cannot be more than 100 characters\"\n            ]\n        }\n    ],\n    reminderSettings: {\n        enabled: {\n            type: Boolean,\n            default: true\n        },\n        daysBefore: {\n            type: Number,\n            default: 7,\n            min: [\n                1,\n                \"Reminder must be at least 1 day before\"\n            ],\n            max: [\n                365,\n                \"Reminder cannot be more than 365 days before\"\n            ]\n        }\n    },\n    userId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    isActive: {\n        type: Boolean,\n        default: true\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n    updatedAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n// Create compound index for user and active birthdays\nBirthdaySchema.index({\n    userId: 1,\n    isActive: 1\n});\n// Create index for birthday date for efficient querying\nBirthdaySchema.index({\n    dateOfBirth: 1\n});\n// Update the updatedAt field before saving\nBirthdaySchema.pre(\"save\", function(next) {\n    this.updatedAt = Date.now();\n    next();\n});\n// Virtual for age calculation\nBirthdaySchema.virtual(\"age\").get(function() {\n    const today = new Date();\n    const birthDate = new Date(this.dateOfBirth);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    if (monthDiff < 0 || monthDiff === 0 && today.getDate() < birthDate.getDate()) {\n        age--;\n    }\n    return age;\n});\n// Virtual for next birthday\nBirthdaySchema.virtual(\"nextBirthday\").get(function() {\n    const today = new Date();\n    const birthDate = new Date(this.dateOfBirth);\n    const nextBirthday = new Date(today.getFullYear(), birthDate.getMonth(), birthDate.getDate());\n    if (nextBirthday < today) {\n        nextBirthday.setFullYear(today.getFullYear() + 1);\n    }\n    return nextBirthday;\n});\n// Virtual for days until birthday\nBirthdaySchema.virtual(\"daysUntilBirthday\").get(function() {\n    const today = new Date();\n    const nextBirthday = this.nextBirthday;\n    const diffTime = nextBirthday - today;\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Birthday || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Birthday\", BirthdaySchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8sQ0FBQyxxQkFBcUJDLEdBQUcsQ0FBQztJQUM5QyxNQUFNQyxRQUFRLElBQUk5QjtJQUNsQixNQUFNcUMsZUFBZSxJQUFJLENBQUNBLFlBQVk7SUFDdEMsTUFBTUUsV0FBV0YsZUFBZVA7SUFDaEMsTUFBTVUsV0FBV0MsS0FBS0MsSUFBSSxDQUFDSCxXQUFZLFFBQU8sS0FBSyxLQUFLLEVBQUM7SUFFekQsT0FBT0M7QUFDVDtBQUVBLGlFQUFlakQsd0RBQWUsQ0FBQ3FELFFBQVEsSUFBSXJELHFEQUFjLENBQUMsWUFBWUMsZUFBZUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2JpcnRoZGF5LXJlbWluZGVyLXRyYWNrZXIvLi9tb2RlbHMvQmlydGhkYXkuanM/Zjk4MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnXHJcblxyXG5jb25zdCBCaXJ0aGRheVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIG5hbWU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSBwcm92aWRlIGEgbmFtZSddLFxyXG4gICAgbWF4bGVuZ3RoOiBbNjAsICdOYW1lIGNhbm5vdCBiZSBtb3JlIHRoYW4gNjAgY2hhcmFjdGVycyddLFxyXG4gIH0sXHJcbiAgZGF0ZU9mQmlydGg6IHtcclxuICAgIHR5cGU6IERhdGUsXHJcbiAgICByZXF1aXJlZDogW3RydWUsICdQbGVhc2UgcHJvdmlkZSBhIGRhdGUgb2YgYmlydGgnXSxcclxuICB9LFxyXG4gIHJlbGF0aW9uc2hpcDoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgZW51bTogWydmYW1pbHknLCAnZnJpZW5kJywgJ2NvbGxlYWd1ZScsICdhY3F1YWludGFuY2UnLCAnb3RoZXInXSxcclxuICAgIGRlZmF1bHQ6ICdmcmllbmQnLFxyXG4gIH0sXHJcbiAgZW1haWw6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGxvd2VyY2FzZTogdHJ1ZSxcclxuICAgIG1hdGNoOiBbL15cXHcrKFsuLV0/XFx3KykqQFxcdysoWy4tXT9cXHcrKSooXFwuXFx3ezIsM30pKyQvLCAnUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBlbWFpbCddLFxyXG4gIH0sXHJcbiAgcGhvbmU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICB9LFxyXG4gIG5vdGVzOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBtYXhsZW5ndGg6IFs1MDAsICdOb3RlcyBjYW5ub3QgYmUgbW9yZSB0aGFuIDUwMCBjaGFyYWN0ZXJzJ10sXHJcbiAgfSxcclxuICBnaWZ0SWRlYXM6IFt7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBtYXhsZW5ndGg6IFsxMDAsICdHaWZ0IGlkZWEgY2Fubm90IGJlIG1vcmUgdGhhbiAxMDAgY2hhcmFjdGVycyddLFxyXG4gIH1dLFxyXG4gIHJlbWluZGVyU2V0dGluZ3M6IHtcclxuICAgIGVuYWJsZWQ6IHtcclxuICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBkYXlzQmVmb3JlOiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgZGVmYXVsdDogNyxcclxuICAgICAgbWluOiBbMSwgJ1JlbWluZGVyIG11c3QgYmUgYXQgbGVhc3QgMSBkYXkgYmVmb3JlJ10sXHJcbiAgICAgIG1heDogWzM2NSwgJ1JlbWluZGVyIGNhbm5vdCBiZSBtb3JlIHRoYW4gMzY1IGRheXMgYmVmb3JlJ10sXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgdXNlcklkOiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6ICdVc2VyJyxcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gIH0sXHJcbiAgaXNBY3RpdmU6IHtcclxuICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICBkZWZhdWx0OiB0cnVlLFxyXG4gIH0sXHJcbiAgY3JlYXRlZEF0OiB7XHJcbiAgICB0eXBlOiBEYXRlLFxyXG4gICAgZGVmYXVsdDogRGF0ZS5ub3csXHJcbiAgfSxcclxuICB1cGRhdGVkQXQ6IHtcclxuICAgIHR5cGU6IERhdGUsXHJcbiAgICBkZWZhdWx0OiBEYXRlLm5vdyxcclxuICB9LFxyXG59KVxyXG5cclxuLy8gQ3JlYXRlIGNvbXBvdW5kIGluZGV4IGZvciB1c2VyIGFuZCBhY3RpdmUgYmlydGhkYXlzXHJcbkJpcnRoZGF5U2NoZW1hLmluZGV4KHsgdXNlcklkOiAxLCBpc0FjdGl2ZTogMSB9KVxyXG5cclxuLy8gQ3JlYXRlIGluZGV4IGZvciBiaXJ0aGRheSBkYXRlIGZvciBlZmZpY2llbnQgcXVlcnlpbmdcclxuQmlydGhkYXlTY2hlbWEuaW5kZXgoeyBkYXRlT2ZCaXJ0aDogMSB9KVxyXG5cclxuLy8gVXBkYXRlIHRoZSB1cGRhdGVkQXQgZmllbGQgYmVmb3JlIHNhdmluZ1xyXG5CaXJ0aGRheVNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XHJcbiAgdGhpcy51cGRhdGVkQXQgPSBEYXRlLm5vdygpXHJcbiAgbmV4dCgpXHJcbn0pXHJcblxyXG4vLyBWaXJ0dWFsIGZvciBhZ2UgY2FsY3VsYXRpb25cclxuQmlydGhkYXlTY2hlbWEudmlydHVhbCgnYWdlJykuZ2V0KGZ1bmN0aW9uKCkge1xyXG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxyXG4gIGNvbnN0IGJpcnRoRGF0ZSA9IG5ldyBEYXRlKHRoaXMuZGF0ZU9mQmlydGgpXHJcbiAgbGV0IGFnZSA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgLSBiaXJ0aERhdGUuZ2V0RnVsbFllYXIoKVxyXG4gIGNvbnN0IG1vbnRoRGlmZiA9IHRvZGF5LmdldE1vbnRoKCkgLSBiaXJ0aERhdGUuZ2V0TW9udGgoKVxyXG4gIFxyXG4gIGlmIChtb250aERpZmYgPCAwIHx8IChtb250aERpZmYgPT09IDAgJiYgdG9kYXkuZ2V0RGF0ZSgpIDwgYmlydGhEYXRlLmdldERhdGUoKSkpIHtcclxuICAgIGFnZS0tXHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBhZ2VcclxufSlcclxuXHJcbi8vIFZpcnR1YWwgZm9yIG5leHQgYmlydGhkYXlcclxuQmlydGhkYXlTY2hlbWEudmlydHVhbCgnbmV4dEJpcnRoZGF5JykuZ2V0KGZ1bmN0aW9uKCkge1xyXG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxyXG4gIGNvbnN0IGJpcnRoRGF0ZSA9IG5ldyBEYXRlKHRoaXMuZGF0ZU9mQmlydGgpXHJcbiAgY29uc3QgbmV4dEJpcnRoZGF5ID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgYmlydGhEYXRlLmdldE1vbnRoKCksIGJpcnRoRGF0ZS5nZXREYXRlKCkpXHJcbiAgXHJcbiAgaWYgKG5leHRCaXJ0aGRheSA8IHRvZGF5KSB7XHJcbiAgICBuZXh0QmlydGhkYXkuc2V0RnVsbFllYXIodG9kYXkuZ2V0RnVsbFllYXIoKSArIDEpXHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBuZXh0QmlydGhkYXlcclxufSlcclxuXHJcbi8vIFZpcnR1YWwgZm9yIGRheXMgdW50aWwgYmlydGhkYXlcclxuQmlydGhkYXlTY2hlbWEudmlydHVhbCgnZGF5c1VudGlsQmlydGhkYXknKS5nZXQoZnVuY3Rpb24oKSB7XHJcbiAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXHJcbiAgY29uc3QgbmV4dEJpcnRoZGF5ID0gdGhpcy5uZXh0QmlydGhkYXlcclxuICBjb25zdCBkaWZmVGltZSA9IG5leHRCaXJ0aGRheSAtIHRvZGF5XHJcbiAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmNlaWwoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpXHJcbiAgXHJcbiAgcmV0dXJuIGRpZmZEYXlzXHJcbn0pXHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuQmlydGhkYXkgfHwgbW9uZ29vc2UubW9kZWwoJ0JpcnRoZGF5JywgQmlydGhkYXlTY2hlbWEpIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiQmlydGhkYXlTY2hlbWEiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwibWF4bGVuZ3RoIiwiZGF0ZU9mQmlydGgiLCJEYXRlIiwicmVsYXRpb25zaGlwIiwiZW51bSIsImRlZmF1bHQiLCJlbWFpbCIsImxvd2VyY2FzZSIsIm1hdGNoIiwicGhvbmUiLCJub3RlcyIsImdpZnRJZGVhcyIsInJlbWluZGVyU2V0dGluZ3MiLCJlbmFibGVkIiwiQm9vbGVhbiIsImRheXNCZWZvcmUiLCJOdW1iZXIiLCJtaW4iLCJtYXgiLCJ1c2VySWQiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiaXNBY3RpdmUiLCJjcmVhdGVkQXQiLCJub3ciLCJ1cGRhdGVkQXQiLCJpbmRleCIsInByZSIsIm5leHQiLCJ2aXJ0dWFsIiwiZ2V0IiwidG9kYXkiLCJiaXJ0aERhdGUiLCJhZ2UiLCJnZXRGdWxsWWVhciIsIm1vbnRoRGlmZiIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsIm5leHRCaXJ0aGRheSIsInNldEZ1bGxZZWFyIiwiZGlmZlRpbWUiLCJkaWZmRGF5cyIsIk1hdGgiLCJjZWlsIiwibW9kZWxzIiwiQmlydGhkYXkiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./models/Birthday.js\n");

/***/ }),

/***/ "(api)/./pages/api/birthdays/index.js":
/*!**************************************!*\
  !*** ./pages/api/birthdays/index.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(api)/./lib/mongodb.js\");\n/* harmony import */ var _models_Birthday__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/Birthday */ \"(api)/./models/Birthday.js\");\n/* harmony import */ var _utils_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/auth */ \"(api)/./utils/auth.js\");\n\n\n\nasync function handler(req, res) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        // Verify authentication\n        const decoded = (0,_utils_auth__WEBPACK_IMPORTED_MODULE_2__.verifyToken)(req);\n        if (!decoded) {\n            return res.status(401).json({\n                message: \"Unauthorized\"\n            });\n        }\n        const userId = decoded.userId;\n        if (req.method === \"GET\") {\n            // Get all birthdays for the authenticated user\n            const { page = 1, limit = 10, search = \"\", relationship = \"\", sortBy = \"nextBirthday\" } = req.query;\n            const query = {\n                userId,\n                isActive: true\n            };\n            // Add search filter\n            if (search) {\n                query.name = {\n                    $regex: search,\n                    $options: \"i\"\n                };\n            }\n            // Add relationship filter\n            if (relationship && relationship !== \"all\") {\n                query.relationship = relationship;\n            }\n            const skip = (parseInt(page) - 1) * parseInt(limit);\n            let sortOptions = {};\n            switch(sortBy){\n                case \"name\":\n                    sortOptions = {\n                        name: 1\n                    };\n                    break;\n                case \"dateOfBirth\":\n                    sortOptions = {\n                        dateOfBirth: 1\n                    };\n                    break;\n                case \"relationship\":\n                    sortOptions = {\n                        relationship: 1,\n                        name: 1\n                    };\n                    break;\n                default:\n                    // Sort by next birthday (upcoming first)\n                    sortOptions = {\n                        dateOfBirth: 1\n                    };\n            }\n            const birthdays = await _models_Birthday__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(query).sort(sortOptions).skip(skip).limit(parseInt(limit)).lean();\n            const total = await _models_Birthday__WEBPACK_IMPORTED_MODULE_1__[\"default\"].countDocuments(query);\n            // Calculate virtual fields for each birthday\n            const birthdaysWithVirtuals = birthdays.map((birthday)=>{\n                const today = new Date();\n                const birthDate = new Date(birthday.dateOfBirth);\n                // Calculate age\n                let age = today.getFullYear() - birthDate.getFullYear();\n                const monthDiff = today.getMonth() - birthDate.getMonth();\n                if (monthDiff < 0 || monthDiff === 0 && today.getDate() < birthDate.getDate()) {\n                    age--;\n                }\n                // Calculate next birthday\n                const nextBirthday = new Date(today.getFullYear(), birthDate.getMonth(), birthDate.getDate());\n                if (nextBirthday < today) {\n                    nextBirthday.setFullYear(today.getFullYear() + 1);\n                }\n                // Calculate days until birthday\n                const diffTime = nextBirthday - today;\n                const daysUntilBirthday = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n                return {\n                    ...birthday,\n                    age,\n                    nextBirthday,\n                    daysUntilBirthday\n                };\n            });\n            res.status(200).json({\n                birthdays: birthdaysWithVirtuals,\n                pagination: {\n                    page: parseInt(page),\n                    limit: parseInt(limit),\n                    total,\n                    pages: Math.ceil(total / parseInt(limit))\n                }\n            });\n        } else if (req.method === \"POST\") {\n            // Create a new birthday\n            const { name, dateOfBirth, relationship, email, phone, notes, giftIdeas, reminderSettings } = req.body;\n            // Validate required fields\n            if (!name || !dateOfBirth) {\n                return res.status(400).json({\n                    message: \"Name and date of birth are required\"\n                });\n            }\n            const newBirthday = new _models_Birthday__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n                name,\n                dateOfBirth: new Date(dateOfBirth),\n                relationship: relationship || \"friend\",\n                email,\n                phone,\n                notes,\n                giftIdeas: giftIdeas || [],\n                reminderSettings: reminderSettings || {\n                    enabled: true,\n                    daysBefore: 7\n                },\n                userId\n            });\n            await newBirthday.save();\n            res.status(201).json({\n                message: \"Birthday created successfully\",\n                birthday: newBirthday\n            });\n        } else {\n            res.status(405).json({\n                message: \"Method not allowed\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Birthdays API error:\", error);\n        res.status(500).json({\n            message: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmlydGhkYXktcmVtaW5kZXItdHJhY2tlci8uL3BhZ2VzL2FwaS9iaXJ0aGRheXMvaW5kZXguanM/NWI1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGJDb25uZWN0IGZyb20gJy4uLy4uLy4uL2xpYi9tb25nb2RiJ1xyXG5pbXBvcnQgQmlydGhkYXkgZnJvbSAnLi4vLi4vLi4vbW9kZWxzL0JpcnRoZGF5J1xyXG5pbXBvcnQgeyB2ZXJpZnlUb2tlbiB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2F1dGgnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGRiQ29ubmVjdCgpXHJcblxyXG4gICAgLy8gVmVyaWZ5IGF1dGhlbnRpY2F0aW9uXHJcbiAgICBjb25zdCBkZWNvZGVkID0gdmVyaWZ5VG9rZW4ocmVxKVxyXG4gICAgaWYgKCFkZWNvZGVkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlcklkID0gZGVjb2RlZC51c2VySWRcclxuXHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgLy8gR2V0IGFsbCBiaXJ0aGRheXMgZm9yIHRoZSBhdXRoZW50aWNhdGVkIHVzZXJcclxuICAgICAgY29uc3QgeyBwYWdlID0gMSwgbGltaXQgPSAxMCwgc2VhcmNoID0gJycsIHJlbGF0aW9uc2hpcCA9ICcnLCBzb3J0QnkgPSAnbmV4dEJpcnRoZGF5JyB9ID0gcmVxLnF1ZXJ5XHJcblxyXG4gICAgICBjb25zdCBxdWVyeSA9IHsgXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFkZCBzZWFyY2ggZmlsdGVyXHJcbiAgICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgICBxdWVyeS5uYW1lID0geyAkcmVnZXg6IHNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFkZCByZWxhdGlvbnNoaXAgZmlsdGVyXHJcbiAgICAgIGlmIChyZWxhdGlvbnNoaXAgJiYgcmVsYXRpb25zaGlwICE9PSAnYWxsJykge1xyXG4gICAgICAgIHF1ZXJ5LnJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcFxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBza2lwID0gKHBhcnNlSW50KHBhZ2UpIC0gMSkgKiBwYXJzZUludChsaW1pdClcclxuXHJcbiAgICAgIGxldCBzb3J0T3B0aW9ucyA9IHt9XHJcbiAgICAgIHN3aXRjaCAoc29ydEJ5KSB7XHJcbiAgICAgICAgY2FzZSAnbmFtZSc6XHJcbiAgICAgICAgICBzb3J0T3B0aW9ucyA9IHsgbmFtZTogMSB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ2RhdGVPZkJpcnRoJzpcclxuICAgICAgICAgIHNvcnRPcHRpb25zID0geyBkYXRlT2ZCaXJ0aDogMSB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ3JlbGF0aW9uc2hpcCc6XHJcbiAgICAgICAgICBzb3J0T3B0aW9ucyA9IHsgcmVsYXRpb25zaGlwOiAxLCBuYW1lOiAxIH1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIC8vIFNvcnQgYnkgbmV4dCBiaXJ0aGRheSAodXBjb21pbmcgZmlyc3QpXHJcbiAgICAgICAgICBzb3J0T3B0aW9ucyA9IHsgZGF0ZU9mQmlydGg6IDEgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBiaXJ0aGRheXMgPSBhd2FpdCBCaXJ0aGRheS5maW5kKHF1ZXJ5KVxyXG4gICAgICAgIC5zb3J0KHNvcnRPcHRpb25zKVxyXG4gICAgICAgIC5za2lwKHNraXApXHJcbiAgICAgICAgLmxpbWl0KHBhcnNlSW50KGxpbWl0KSlcclxuICAgICAgICAubGVhbigpXHJcblxyXG4gICAgICBjb25zdCB0b3RhbCA9IGF3YWl0IEJpcnRoZGF5LmNvdW50RG9jdW1lbnRzKHF1ZXJ5KVxyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHZpcnR1YWwgZmllbGRzIGZvciBlYWNoIGJpcnRoZGF5XHJcbiAgICAgIGNvbnN0IGJpcnRoZGF5c1dpdGhWaXJ0dWFscyA9IGJpcnRoZGF5cy5tYXAoYmlydGhkYXkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxyXG4gICAgICAgIGNvbnN0IGJpcnRoRGF0ZSA9IG5ldyBEYXRlKGJpcnRoZGF5LmRhdGVPZkJpcnRoKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBhZ2VcclxuICAgICAgICBsZXQgYWdlID0gdG9kYXkuZ2V0RnVsbFllYXIoKSAtIGJpcnRoRGF0ZS5nZXRGdWxsWWVhcigpXHJcbiAgICAgICAgY29uc3QgbW9udGhEaWZmID0gdG9kYXkuZ2V0TW9udGgoKSAtIGJpcnRoRGF0ZS5nZXRNb250aCgpXHJcbiAgICAgICAgaWYgKG1vbnRoRGlmZiA8IDAgfHwgKG1vbnRoRGlmZiA9PT0gMCAmJiB0b2RheS5nZXREYXRlKCkgPCBiaXJ0aERhdGUuZ2V0RGF0ZSgpKSkge1xyXG4gICAgICAgICAgYWdlLS1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBuZXh0IGJpcnRoZGF5XHJcbiAgICAgICAgY29uc3QgbmV4dEJpcnRoZGF5ID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgYmlydGhEYXRlLmdldE1vbnRoKCksIGJpcnRoRGF0ZS5nZXREYXRlKCkpXHJcbiAgICAgICAgaWYgKG5leHRCaXJ0aGRheSA8IHRvZGF5KSB7XHJcbiAgICAgICAgICBuZXh0QmlydGhkYXkuc2V0RnVsbFllYXIodG9kYXkuZ2V0RnVsbFllYXIoKSArIDEpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgZGF5cyB1bnRpbCBiaXJ0aGRheVxyXG4gICAgICAgIGNvbnN0IGRpZmZUaW1lID0gbmV4dEJpcnRoZGF5IC0gdG9kYXlcclxuICAgICAgICBjb25zdCBkYXlzVW50aWxCaXJ0aGRheSA9IE1hdGguY2VpbChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLmJpcnRoZGF5LFxyXG4gICAgICAgICAgYWdlLFxyXG4gICAgICAgICAgbmV4dEJpcnRoZGF5LFxyXG4gICAgICAgICAgZGF5c1VudGlsQmlydGhkYXlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgYmlydGhkYXlzOiBiaXJ0aGRheXNXaXRoVmlydHVhbHMsXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgcGFnZTogcGFyc2VJbnQocGFnZSksXHJcbiAgICAgICAgICBsaW1pdDogcGFyc2VJbnQobGltaXQpLFxyXG4gICAgICAgICAgdG90YWwsXHJcbiAgICAgICAgICBwYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gcGFyc2VJbnQobGltaXQpKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgYmlydGhkYXlcclxuICAgICAgY29uc3QgeyBuYW1lLCBkYXRlT2ZCaXJ0aCwgcmVsYXRpb25zaGlwLCBlbWFpbCwgcGhvbmUsIG5vdGVzLCBnaWZ0SWRlYXMsIHJlbWluZGVyU2V0dGluZ3MgfSA9IHJlcS5ib2R5XHJcblxyXG4gICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgICAgaWYgKCFuYW1lIHx8ICFkYXRlT2ZCaXJ0aCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdOYW1lIGFuZCBkYXRlIG9mIGJpcnRoIGFyZSByZXF1aXJlZCcgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbmV3QmlydGhkYXkgPSBuZXcgQmlydGhkYXkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgZGF0ZU9mQmlydGg6IG5ldyBEYXRlKGRhdGVPZkJpcnRoKSxcclxuICAgICAgICByZWxhdGlvbnNoaXA6IHJlbGF0aW9uc2hpcCB8fCAnZnJpZW5kJyxcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBwaG9uZSxcclxuICAgICAgICBub3RlcyxcclxuICAgICAgICBnaWZ0SWRlYXM6IGdpZnRJZGVhcyB8fCBbXSxcclxuICAgICAgICByZW1pbmRlclNldHRpbmdzOiByZW1pbmRlclNldHRpbmdzIHx8IHsgZW5hYmxlZDogdHJ1ZSwgZGF5c0JlZm9yZTogNyB9LFxyXG4gICAgICAgIHVzZXJJZFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgYXdhaXQgbmV3QmlydGhkYXkuc2F2ZSgpXHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogJ0JpcnRoZGF5IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgICBiaXJ0aGRheTogbmV3QmlydGhkYXlcclxuICAgICAgfSlcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pXHJcbiAgICB9XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdCaXJ0aGRheXMgQVBJIGVycm9yOicsIGVycm9yKVxyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJkYkNvbm5lY3QiLCJCaXJ0aGRheSIsInZlcmlmeVRva2VuIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImRlY29kZWQiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInVzZXJJZCIsIm1ldGhvZCIsInBhZ2UiLCJsaW1pdCIsInNlYXJjaCIsInJlbGF0aW9uc2hpcCIsInNvcnRCeSIsInF1ZXJ5IiwiaXNBY3RpdmUiLCJuYW1lIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJza2lwIiwicGFyc2VJbnQiLCJzb3J0T3B0aW9ucyIsImRhdGVPZkJpcnRoIiwiYmlydGhkYXlzIiwiZmluZCIsInNvcnQiLCJsZWFuIiwidG90YWwiLCJjb3VudERvY3VtZW50cyIsImJpcnRoZGF5c1dpdGhWaXJ0dWFscyIsIm1hcCIsImJpcnRoZGF5IiwidG9kYXkiLCJEYXRlIiwiYmlydGhEYXRlIiwiYWdlIiwiZ2V0RnVsbFllYXIiLCJtb250aERpZmYiLCJnZXRNb250aCIsImdldERhdGUiLCJuZXh0QmlydGhkYXkiLCJzZXRGdWxsWWVhciIsImRpZmZUaW1lIiwiZGF5c1VudGlsQmlydGhkYXkiLCJNYXRoIiwiY2VpbCIsInBhZ2luYXRpb24iLCJwYWdlcyIsImVtYWlsIiwicGhvbmUiLCJub3RlcyIsImdpZnRJZGVhcyIsInJlbWluZGVyU2V0dGluZ3MiLCJib2R5IiwibmV3QmlydGhkYXkiLCJlbmFibGVkIiwiZGF5c0JlZm9yZSIsInNhdmUiLCJlcnJvciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/birthdays/index.js\n");

/***/ }),

/***/ "(api)/./utils/auth.js":
/*!***********************!*\
  !*** ./utils/auth.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authHelpers: () => (/* binding */ authHelpers),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\n// Verify JWT token from request headers\nfunction verifyToken(req) {\n    try {\n        const authHeader = req.headers.authorization;\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return null;\n        }\n        const token = authHeader.substring(7) // Remove 'Bearer ' prefix\n        ;\n        if (!token) {\n            return null;\n        }\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, \"your-super-secret-jwt-key-here\");\n        return decoded;\n    } catch (error) {\n        console.error(\"Token verification error:\", error);\n        return null;\n    }\n}\n// Generate JWT token\nfunction generateToken(payload) {\n    try {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, \"your-super-secret-jwt-key-here\", {\n            expiresIn: \"7d\"\n        });\n    } catch (error) {\n        console.error(\"Token generation error:\", error);\n        return null;\n    }\n}\n// Middleware to protect routes\nfunction requireAuth(handler) {\n    return async (req, res)=>{\n        const decoded = verifyToken(req);\n        if (!decoded) {\n            return res.status(401).json({\n                message: \"Unauthorized\"\n            });\n        }\n        // Add user info to request\n        req.user = decoded;\n        return handler(req, res);\n    };\n}\n// Middleware to require admin role\nfunction requireAdmin(handler) {\n    return async (req, res)=>{\n        const decoded = verifyToken(req);\n        if (!decoded) {\n            return res.status(401).json({\n                message: \"Unauthorized\"\n            });\n        }\n        if (decoded.role !== \"admin\") {\n            return res.status(403).json({\n                message: \"Admin access required\"\n            });\n        }\n        // Add user info to request\n        req.user = decoded;\n        return handler(req, res);\n    };\n}\n// Client-side auth helpers\nconst authHelpers = {\n    // Store token in localStorage\n    setToken: (token)=>{\n        if (false) {}\n    },\n    // Get token from localStorage\n    getToken: ()=>{\n        if (false) {}\n        return null;\n    },\n    // Remove token from localStorage\n    removeToken: ()=>{\n        if (false) {}\n    },\n    // Store user data in localStorage\n    setUserData: (userData)=>{\n        if (false) {}\n    },\n    // Get user data from localStorage\n    getUserData: ()=>{\n        if (false) {}\n        return null;\n    },\n    // Check if user is authenticated\n    isAuthenticated: ()=>{\n        const token = authHelpers.getToken();\n        if (!token) return false;\n        try {\n            // Decode token to check expiration\n            const payload = JSON.parse(atob(token.split(\".\")[1]));\n            const currentTime = Date.now() / 1000;\n            if (payload.exp < currentTime) {\n                // Token expired, remove it\n                authHelpers.removeToken();\n                return false;\n            }\n            return true;\n        } catch (error) {\n            // Invalid token, remove it\n            authHelpers.removeToken();\n            return false;\n        }\n    },\n    // Get authorization headers for API requests\n    getAuthHeaders: ()=>{\n        const token = authHelpers.getToken();\n        return token ? {\n            Authorization: `Bearer ${token}`\n        } : {};\n    },\n    // Logout user\n    logout: ()=>{\n        authHelpers.removeToken();\n        if (false) {}\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dCQUM3QiwyQkFBMkI7Z0JBQzNCakIsWUFBWU0sV0FBVztnQkFDdkIsT0FBTztZQUNUO1lBRUEsT0FBTztRQUNULEVBQUUsT0FBT3JCLE9BQU87WUFDZCwyQkFBMkI7WUFDM0JlLFlBQVlNLFdBQVc7WUFDdkIsT0FBTztRQUNUO0lBQ0Y7SUFFQSw2Q0FBNkM7SUFDN0NlLGdCQUFnQjtRQUNkLE1BQU0zQyxRQUFRc0IsWUFBWUksUUFBUTtRQUNsQyxPQUFPMUIsUUFBUTtZQUFFNEMsZUFBZSxDQUFDLE9BQU8sRUFBRTVDLE1BQU0sQ0FBQztRQUFDLElBQUksQ0FBQztJQUN6RDtJQUVBLGNBQWM7SUFDZDZDLFFBQVE7UUFDTnZCLFlBQVlNLFdBQVc7UUFDdkIsSUFBSSxLQUFrQixFQUFhLEVBRWxDO0lBQ0g7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmlydGhkYXktcmVtaW5kZXItdHJhY2tlci8uL3V0aWxzL2F1dGguanM/ZWI2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcclxuXHJcbi8vIFZlcmlmeSBKV1QgdG9rZW4gZnJvbSByZXF1ZXN0IGhlYWRlcnNcclxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVRva2VuKHJlcSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvblxyXG4gICAgXHJcbiAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnN1YnN0cmluZyg3KSAvLyBSZW1vdmUgJ0JlYXJlciAnIHByZWZpeFxyXG4gICAgXHJcbiAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpXHJcbiAgICByZXR1cm4gZGVjb2RlZFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdUb2tlbiB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxufVxyXG5cclxuLy8gR2VuZXJhdGUgSldUIHRva2VuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRva2VuKHBheWxvYWQpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsIHsgZXhwaXJlc0luOiAnN2QnIH0pXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIGdlbmVyYXRpb24gZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxufVxyXG5cclxuLy8gTWlkZGxld2FyZSB0byBwcm90ZWN0IHJvdXRlc1xyXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZUF1dGgoaGFuZGxlcikge1xyXG4gIHJldHVybiBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlbihyZXEpXHJcbiAgICBcclxuICAgIGlmICghZGVjb2RlZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCB1c2VyIGluZm8gdG8gcmVxdWVzdFxyXG4gICAgcmVxLnVzZXIgPSBkZWNvZGVkXHJcbiAgICBcclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKVxyXG4gIH1cclxufVxyXG5cclxuLy8gTWlkZGxld2FyZSB0byByZXF1aXJlIGFkbWluIHJvbGVcclxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVBZG1pbihoYW5kbGVyKSB7XHJcbiAgcmV0dXJuIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IHZlcmlmeVRva2VuKHJlcSlcclxuICAgIFxyXG4gICAgaWYgKCFkZWNvZGVkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRlY29kZWQucm9sZSAhPT0gJ2FkbWluJykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCB1c2VyIGluZm8gdG8gcmVxdWVzdFxyXG4gICAgcmVxLnVzZXIgPSBkZWNvZGVkXHJcbiAgICBcclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKVxyXG4gIH1cclxufVxyXG5cclxuLy8gQ2xpZW50LXNpZGUgYXV0aCBoZWxwZXJzXHJcbmV4cG9ydCBjb25zdCBhdXRoSGVscGVycyA9IHtcclxuICAvLyBTdG9yZSB0b2tlbiBpbiBsb2NhbFN0b3JhZ2VcclxuICBzZXRUb2tlbjogKHRva2VuKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F1dGhUb2tlbicsIHRva2VuKVxyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8vIEdldCB0b2tlbiBmcm9tIGxvY2FsU3RvcmFnZVxyXG4gIGdldFRva2VuOiAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoVG9rZW4nKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9LFxyXG5cclxuICAvLyBSZW1vdmUgdG9rZW4gZnJvbSBsb2NhbFN0b3JhZ2VcclxuICByZW1vdmVUb2tlbjogKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhdXRoVG9rZW4nKVxyXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlckRhdGEnKVxyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8vIFN0b3JlIHVzZXIgZGF0YSBpbiBsb2NhbFN0b3JhZ2VcclxuICBzZXRVc2VyRGF0YTogKHVzZXJEYXRhKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJEYXRhJywgSlNPTi5zdHJpbmdpZnkodXNlckRhdGEpKVxyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8vIEdldCB1c2VyIGRhdGEgZnJvbSBsb2NhbFN0b3JhZ2VcclxuICBnZXRVc2VyRGF0YTogKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJEYXRhJylcclxuICAgICAgcmV0dXJuIHVzZXJEYXRhID8gSlNPTi5wYXJzZSh1c2VyRGF0YSkgOiBudWxsXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH0sXHJcblxyXG4gIC8vIENoZWNrIGlmIHVzZXIgaXMgYXV0aGVudGljYXRlZFxyXG4gIGlzQXV0aGVudGljYXRlZDogKCkgPT4ge1xyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVscGVycy5nZXRUb2tlbigpXHJcbiAgICBpZiAoIXRva2VuKSByZXR1cm4gZmFsc2VcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBEZWNvZGUgdG9rZW4gdG8gY2hlY2sgZXhwaXJhdGlvblxyXG4gICAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5wYXJzZShhdG9iKHRva2VuLnNwbGl0KCcuJylbMV0pKVxyXG4gICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCkgLyAxMDAwXHJcbiAgICAgIFxyXG4gICAgICBpZiAocGF5bG9hZC5leHAgPCBjdXJyZW50VGltZSkge1xyXG4gICAgICAgIC8vIFRva2VuIGV4cGlyZWQsIHJlbW92ZSBpdFxyXG4gICAgICAgIGF1dGhIZWxwZXJzLnJlbW92ZVRva2VuKClcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIEludmFsaWQgdG9rZW4sIHJlbW92ZSBpdFxyXG4gICAgICBhdXRoSGVscGVycy5yZW1vdmVUb2tlbigpXHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8vIEdldCBhdXRob3JpemF0aW9uIGhlYWRlcnMgZm9yIEFQSSByZXF1ZXN0c1xyXG4gIGdldEF1dGhIZWFkZXJzOiAoKSA9PiB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWxwZXJzLmdldFRva2VuKClcclxuICAgIHJldHVybiB0b2tlbiA/IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAgfSA6IHt9XHJcbiAgfSxcclxuXHJcbiAgLy8gTG9nb3V0IHVzZXJcclxuICBsb2dvdXQ6ICgpID0+IHtcclxuICAgIGF1dGhIZWxwZXJzLnJlbW92ZVRva2VuKClcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbG9naW4nXHJcbiAgICB9XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbImp3dCIsInZlcmlmeVRva2VuIiwicmVxIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhcnRzV2l0aCIsInRva2VuIiwic3Vic3RyaW5nIiwiZGVjb2RlZCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2VuZXJhdGVUb2tlbiIsInBheWxvYWQiLCJzaWduIiwiZXhwaXJlc0luIiwicmVxdWlyZUF1dGgiLCJoYW5kbGVyIiwicmVzIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ1c2VyIiwicmVxdWlyZUFkbWluIiwicm9sZSIsImF1dGhIZWxwZXJzIiwic2V0VG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZ2V0VG9rZW4iLCJnZXRJdGVtIiwicmVtb3ZlVG9rZW4iLCJyZW1vdmVJdGVtIiwic2V0VXNlckRhdGEiLCJ1c2VyRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRVc2VyRGF0YSIsInBhcnNlIiwiaXNBdXRoZW50aWNhdGVkIiwiYXRvYiIsInNwbGl0IiwiY3VycmVudFRpbWUiLCJEYXRlIiwibm93IiwiZXhwIiwiZ2V0QXV0aEhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwibG9nb3V0Iiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./utils/auth.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbirthdays&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cbirthdays%5Cindex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();